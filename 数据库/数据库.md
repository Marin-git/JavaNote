[TOC]

### 事务

#### 事务的四个基本特征：
1. `Atomic`（原子性）：事务中包含的操作被看做一个逻辑单元，这个逻辑单元中的操作要么全部成功，要么全部失败。
2. `Consistency`（一致性）：事务完成时，数据必须处于一致状态，数据的完整性约束没有被破坏，事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没    有执行过一样。
3. `Isolation`（隔离性）：事务允许多个用户对同一个数据进行并发访问，而不破坏数据的正确性 和完整性。同时，并行事务的修改必须与其他并行事务的修改相互独立。
4. `Durability`（持久性）：事务结束后，事务处理的结果必须能够得到固化。

Isolation:[ˌaɪsəˈleɪʃn]
Durability:[ˌdjʊərə'bɪlətɪ]


#### 隔离级别



1. 脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是`脏数据`
2. 不可重复读：事务 A `多次读取同一数据`，事务 B 在事务A多次读取的过程中，对数据作了`更新`并提交，导致事务A多次读取同一数据时，`结果不一致`。
3. 幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候`插入`了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。


不可重复读的和幻读很容易混淆，`不可重复读`侧重于`修改`，幻读侧重于`新增或删除`.解决`不可重复读`的问题只需`锁住满足条件的行`，解决`幻读`需要`锁表`


三、MySQL事务隔离级别

|事务隔离级别	|脏读	|不可重复读|	幻读
|:-:|:-:|:-:|:-:|
|读未提交(read-uncommitted)|是|是|是
|不可重复读(read-committed)|否|是|是
|可重复读(repeatable-read) |否|否|是
|串行化(serializable)      |否|否|否

MySQL默认的事务隔离级别为`repeatable-read`


[MySQL的四种事务隔离级别](https://www.cnblogs.com/huanongying/p/7021555.html)





### 三大范式+1

1. 1NF: 关系模式R的每个属性值都是`不可分解`的数据项
2. 2NF: 满足1NF，且不存在任何非主属性对候选关键字的`部分函数依赖`
3. 3NF：满足1NF，2NF，且不存在非主属性对候选关键字的`传递函数依赖`
4. BCNF: 满足1NF，且每个属性都不传递依赖于R的候选键



### 数据库常见操作

ACID


这不算是一个问题，只算是给大家的一个提醒。如果你是现场面试的话，有时候是会被要求手写SQL的，所以你对于groupBy，orderBy，子查询之类的基础肯定是要会的。。。不然写一个简单的sql你都不会，估计直接就凉了。推荐你们看一下《MySQL必知必会》，我觉得这本书算是比较基础，比较容易上手。

#### 左连接右连接，全连接，外连接

什么是左连接，什么是右连接，什么是全连接，什么是内连接？
这个知识点太基础了，我就不说了，不会的自己去查。。。



#### 索引的作用和实现

数据库的索引有什么作用？用什么来实现的？
这个问题我觉得三次面试会被问到一次，基本上也是被问烂了。索引是用来加快查找速度的。目前在数据库中一般是使用B+树来实现索引的。



### SQL编译的过程大概是什么样的？（这一点可不看，算是偏门）

+ 存储过程是预编译的，所以存储过程的运行性能更高；
+ java用 prepareStatement，预编译防止SQL注入






### mysql的联合索引

+ where 对复合索引or，索引不起作用
+ 最左原则：key index(a,b,c)可以只用[a],或[a,b]
+ 经常查询，而不是经常CID操作
+ key基本不重复；
+ 数据条目比较大
+ 索引的列不应该为null
+ 字符串索引使用短索引
+ no in 进行全表扫描，no exists 可利用索引


- [ ] 后面有空直接看书补充





####  联合索引的顺序和写的sql语句的where顺序是否必须一致

---


### mysql引擎

+ innoDB:
	* 支持事务
	* 支持行级锁
	* 支持外键
	* 两次写：崩溃恢复
	* 支持场景：
		+ 必须事务
		+ 数据安全性要求高，崩溃恢复
		+ CID操作频繁

+ MyISAM
	* 快速并发读，速度贼快
	* 5.7左右的版本前是默认的引擎，最好的习惯还是每次建表都手动设置或查看一下默认设置
	* 适合场景
		+ 以查询为主，很少CID操作
		+ 没有事务
		+ 数据安全性要求不是很高
+ MEMORY



为什么在内存中用B树,不用B+ 树：








为什么在MySQL用B+树而不用B树：

### timestamp 和datatime

TIMESTAMP和DATETIME的相同点：

+ 两者都可用来表示YYYY-MM-DD HH:MM:SS[.fraction]类型的日期。

TIMESTAMP和DATETIME的不同点：

+ 两者的存储方式不一样
对于TIMESTAMP，它把客户端插入的时间从当前时区转化为UTC（世界标准时间）进行存储。查询时，将其又转化为客户端当前时区进行返回。
而对于DATETIME，不做任何改变，基本上是原样输入和输出。